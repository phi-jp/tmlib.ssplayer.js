<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <meta http-equiv="Content-Type" content="text/html;" />
    <script src="http://cdn.rawgit.com/SpriteStudio/SSPlayerForCCH/master/Player/Html5Player/Html5Player/SsaPlayer.js"></script>
    <script src="http://cdn.rawgit.com/phi-jp/tmlib.js/0.3.0/build/tmlib.js"></script>
    <script src="tmlib.ssplayer.js"></script>
    
    <script type="text/javascript">

tm.main(function() {
    var app = tm.display.CanvasApp("#world");

    app.fitWindow();

    var loading = tm.app.LoadingScene({
        assets: {
            card: './data/card/out.json',
            comipo: './data/comipo/out.json',
            robo: './data/robo/out.json',
            effect: './data/effect/out.json',
        }
    });

    app.replaceScene(loading);

    loading.onload = function() {
        app.replaceScene(MainScene());
    };


    app.run();
});

tm.define("MainScene", {
    superClass: "tm.app.Scene",

    init: function() {
        this.superInit();

        var card = tm.ssplayer.Element("card", "./data/card/").addChildTo(this);
        var comipo = tm.ssplayer.Element("comipo", "./data/comipo/").addChildTo(this);
        var robo = tm.ssplayer.Element("robo", "./data/robo/").addChildTo(this);
        var effect = tm.ssplayer.Element("effect", "./data/effect/").addChildTo(this);

        card.setPosition(40, 0);
        robo.setPosition(300, 100);
        effect.setPosition(0, 500);

        this.elm = comipo;

        comipo.hide();
        robo.hide();
        effect.hide();
    },

    onpointingstart: function() {
        // this.elm.setAnimation(this.elm.animationIndex+1);
        // this.elm.setAnimationByName("run_run");
    },
});

    </script>
</head>

<body>
    <canvas id="world" width="640" height="960"></canvas>
</body>

</html>
